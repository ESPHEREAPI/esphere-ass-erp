<!DOCTYPE html>
<html>

<body style="background: #f8f9fa; min-height: 50vh;">
    <div class="content-wrapper" style="background: transparent;">
        <div class="content login-content">
            <!-- Toast pour les notifications -->
            <p-toast position="top-right"></p-toast>
              
            <div class="hold-transition">
                <div class="container">
                    <div class=" justify-content-center">
                        <div class="col-sm-9 ">
                            <div class="login-box-container">

                                <!-- Logo et titre avec animation -->
                                <div class="text-center mb-4 logo-container animate__animated animate__fadeInDown">
                                    <a href="#" class="navbar-brand">
                                        <img src="../favicon-96x96.png" alt="zenithe Logo"
                                            class="brand-image img-circle elevation-3 logo-pulse" 
                                            style="opacity: .8">
                                        <span class="brand-text">
                                            <b class="login-logo">ZEN-BIO</b> Gestion Couverture Santé
                                        </span>
                                    </a>
                                </div>

                                <!-- Carte de login avec ombre élégante -->
                                <div class="card card-primary card-outline login-card animate__animated animate__fadeInUp">
                                    <div class="card-header text-center bg-white border-0 pb-0">
                                        <div class="lock-icon-container">
                                            <i class="fas fa-lock text-muted"></i>
                                        </div>
                                        <p class="login-box-msg text-muted mb-0">
                                            Veuillez vous authentifier
                                        </p>
                                    </div>
                                    <div class="card-body login-card-body pt-3">
                                        
                                        <!-- Message d'erreur avec animation -->
                                        <div *ngIf="errorMessage" 
                                             class="alert alert-danger alert-dismissible fade show animate__animated animate__shakeX" 
                                             role="alert">
                                            <i class="fas fa-exclamation-triangle mr-2"></i>{{ errorMessage }}
                                            <button type="button" class="close" (click)="errorMessage = ''" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>

                                        <!-- Formulaire de connexion -->
                                        <form #f="ngForm" accept-charset="UTF-8" role="form" 
                                              (ngSubmit)="onLogin(f.value)"
                                              class="needs-validation"
                                              novalidate>
                                            
                                            <!-- Champ Username avec animation -->
                                            <div class="form-group mb-4">
                                                <label for="username" class="form-label text-muted small mb-2">
                                                    <i class="fas fa-user mr-1"></i>Identifiant
                                                </label>
                                                <div class="input-group input-group-lg input-animate">
                                                    <input 
                                                        type="text" 
                                                        class="form-control form-control-lg" 
                                                        id="username"
                                                        placeholder="Entrez" 
                                                        name="username" 
                                                        ngModel
                                                        required
                                                        #username="ngModel"
                                                        [disabled]="loading"
                                                        [class.is-invalid]="username.invalid && username.touched"
                                                        [class.is-valid]="username.valid && username.touched">
                                                    <div class="input-group-append">
                                                        <div class="input-group-text bg-white border-left-0">
                                                            <span class="fas fa-envelope text-primary"></span>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="username.invalid && username.touched" class="invalid-feedback">
                                                        Le login est requis
                                                    </div>
                                                </div>
                                            </div>
                                           
                                            <!-- Champ Password avec animation -->
                                            <div class="form-group mb-4">
                                                <label for="password" class="form-label text-muted small mb-2">
                                                    <i class="fas fa-lock mr-1"></i>Mot de passe
                                                </label>
                                                <div class="input-group input-group-lg input-animate">
                                                    <input 
                                                        [type]="showPassword ? 'text' : 'password'" 
                                                        class="form-control form-control-lg" 
                                                        id="password"
                                                        placeholder="Entrez" 
                                                        name="password" 
                                                        ngModel
                                                        required
                                                        #password="ngModel"
                                                        [disabled]="loading"
                                                        [class.is-invalid]="password.invalid && password.touched"
                                                        [class.is-valid]="password.valid && password.touched">
                                                    <div class="input-group-append">
                                                        <button 
                                                            class="btn btn-outline-secondary bg-white border-left-0" 
                                                            type="button"
                                                            (click)="togglePasswordVisibility()"
                                                            [disabled]="loading"
                                                            style="border-color: #ced4da;">
                                                            <span [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'" 
                                                                  class="text-primary"></span>
                                                        </button>
                                                    </div>
                                                    <div *ngIf="password.invalid && password.touched" class="invalid-feedback">
                                                        Le mot de passe est requis
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Remember me et bouton -->
                                            <div class="row align-items-center mb-3">
                                                <div class="col-7">
                                                    <div class="icheck-primary">
                                                        <input 
                                                            type="checkbox" 
                                                            id="remember" 
                                                            name="remember" 
                                                            ngModel
                                                            [disabled]="loading">
                                                        <label for="remember" class="text-muted">
                                                            <small>Se souvenir de moi</small>
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-5 text-right">
                                                    <button 
                                                        type="submit" 
                                                        class="btn btn-primary btn-lg btn-block btn-login"
                                                        [disabled]="loading || f.invalid"
                                                        [class.btn-loading]="loading">
                                                        <span *ngIf="!loading" class="d-flex align-items-center justify-content-center">
                                                            <i class="fas fa-sign-in-alt mr-2"></i>
                                                            <span>CONNEXION</span>
                                                        </span>
                                                        <span *ngIf="loading" class="d-flex align-items-center justify-content-center">
                                                            <span class="spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span>
                                                            <span>CONNEXION...</span>
                                                        </span>
                                                    </button>
                                                </div>
                                            </div>
                                        </form>

                                        <!-- Divider -->
                                        <div class="social-auth-links text-center mb-3">
                                            <div class="or-divider">
                                                <span class="or-text">OU</span>
                                            </div>
                                        </div>

                                        <!-- Lien mot de passe oublié -->
                                        <p class="mb-0 text-center">
                                            <a href="#" class="text-primary">
                                                <small><i class="fas fa-question-circle mr-1"></i>Mot de passe oublié ?</small>
                                            </a>
                                        </p>
                                    </div>
                                </div>

                                <!-- Footer -->
                                <div class="text-center mt-3">
                                    <p class="text-muted">
                                        <small>&copy; 2008-{{ currentYear }}  <a href="https://zenitheinsurance.com" target="_blank">ZENITHE
                    Insurance  </a>Tous droits réservés.</small>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>